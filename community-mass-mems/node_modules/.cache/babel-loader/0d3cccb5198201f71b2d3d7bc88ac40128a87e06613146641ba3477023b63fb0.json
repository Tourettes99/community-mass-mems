{"ast":null,"code":"import React,{useState}from'react';import{Box,Card,CardContent,Typography,CardMedia,CircularProgress,IconButton,CardHeader,Avatar,Link,Stack,Chip}from'@mui/material';import{motion,AnimatePresence}from'framer-motion';import RefreshIcon from'@mui/icons-material/Refresh';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MemoryCard=_ref=>{let{memory}=_ref;const[expanded,setExpanded]=useState(false);const handleCardClick=event=>{if(event.target.closest('video, audio, iframe, a, button')){return;}setExpanded(!expanded);};const formatFileSize=bytes=>{if(bytes===0)return'0 B';const k=1024;const sizes=['B','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return`${parseFloat((bytes/Math.pow(k,i)).toFixed(2))} ${sizes[i]}`;};const renderMetadataDetails=metadata=>{if(!metadata)return null;const details=[];if(metadata.fileSize){details.push(`Size: ${formatFileSize(metadata.fileSize)}`);}if(metadata.contentType){details.push(`Type: ${metadata.contentType}`);}if(metadata.resolution){details.push(`Resolution: ${metadata.resolution}`);}if(metadata.duration){details.push(`Duration: ${metadata.duration}`);}if(metadata.format){details.push(`Format: ${metadata.format}`);}if(metadata.lastModified){details.push(`Modified: ${new Date(metadata.lastModified).toLocaleString()}`);}if(details.length===0)return null;return/*#__PURE__*/_jsx(Box,{sx:{mt:1,mb:1},children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",component:\"div\",children:details.join(' â€¢ ')})});};const renderUrlCard=()=>{const metadata=memory.metadata;if(!metadata)return null;return/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column',cursor:'pointer','&:hover':{boxShadow:3}},onClick:handleCardClick,children:[/*#__PURE__*/_jsx(CardHeader,{avatar:metadata.favicon?/*#__PURE__*/_jsx(Avatar,{src:metadata.favicon,sx:{width:24,height:24},imgProps:{style:{objectFit:'contain'}}}):null,title:/*#__PURE__*/_jsx(Link,{href:memory.url,target:\"_blank\",rel:\"noopener noreferrer\",onClick:e=>e.stopPropagation(),sx:{color:'inherit',textDecoration:'none','&:hover':{textDecoration:'underline'}},children:metadata.title||memory.url}),subheader:metadata.siteName}),renderMetadataDetails(metadata),metadata.isPlayable&&metadata.playbackHtml?/*#__PURE__*/_jsx(Box,{sx:{width:'100%',position:'relative',paddingTop:metadata.mediaType==='video'?'56.25%':'auto','& iframe':{position:metadata.mediaType==='video'?'absolute':'relative',top:0,left:0,width:'100%',height:metadata.mediaType==='video'?'100%':'auto',border:'none',borderRadius:1},'& video, & audio':{width:'100%',borderRadius:1}},dangerouslySetInnerHTML:{__html:metadata.playbackHtml}}):metadata.previewUrl?/*#__PURE__*/_jsx(CardMedia,{component:\"img\",image:metadata.previewUrl,alt:metadata.title||\"Preview\",sx:{width:'100%',height:'auto',maxHeight:'300px',objectFit:'cover'}}):null,(metadata.description||metadata.rawContent)&&/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{display:'-webkit-box',WebkitLineClamp:expanded?'unset':3,WebkitBoxOrient:'vertical',overflow:'hidden',transition:'all 0.3s ease',...(metadata.rawContent&&{fontFamily:'monospace',whiteSpace:'pre-wrap',fontSize:'0.75rem'})},children:metadata.rawContent||metadata.description})}),memory.tags&&memory.tags.length>0&&/*#__PURE__*/_jsx(CardContent,{sx:{pt:0},children:/*#__PURE__*/_jsx(Stack,{direction:\"row\",spacing:1,flexWrap:\"wrap\",gap:1,children:memory.tags.map((tag,index)=>/*#__PURE__*/_jsx(Chip,{label:tag,size:\"small\",sx:{borderRadius:1},onClick:e=>e.stopPropagation()},index))})})]});};// Render different card types based on memory type\nswitch(memory.type){case'url':case'image':case'video':case'audio':case'static':return renderUrlCard();default:return null;}};const MemoryGrid=_ref2=>{let{memories,loading=false,error=null,onRefresh}=_ref2;if(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',p:4},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsxs(Box,{sx:{p:4,textAlign:'center',display:'flex',flexDirection:'column',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error}),onRefresh&&/*#__PURE__*/_jsx(IconButton,{onClick:onRefresh,color:\"primary\",children:/*#__PURE__*/_jsx(RefreshIcon,{})})]});}if(!memories.length){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:200},children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:\"No memories yet. Create your first memory above!\"})});}return/*#__PURE__*/_jsx(Box,{sx:{display:'grid',gridTemplateColumns:{xs:'1fr',sm:'repeat(2, 1fr)',md:'repeat(3, 1fr)',lg:'repeat(4, 1fr)'},gap:3,p:3},children:/*#__PURE__*/_jsx(AnimatePresence,{children:memories.map(memory=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},children:/*#__PURE__*/_jsx(MemoryCard,{memory:memory})},memory._id))})});};export default MemoryGrid;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}